<h1 class="title">Mi Perfil</h1>

<div class="header">
  <div class="avatar">
    <mat-icon>account_circle</mat-icon>
  </div>
  <div class="name">{{ f['nombre'].value || 'Nombre' }}</div>

  <div class="actions">
    <button mat-stroked-button (click)="abrirCambiarPassword()">
      Cambiar contraseña
    </button>

    <button mat-raised-button color="primary" (click)="guardar()">
      Guardar cambios
    </button>
  </div>
</div>

<mat-divider class="sep"></mat-divider>

<form class="grid" [formGroup]="form" (ngSubmit)="guardar()">
  <div class="col">
    <mat-form-field appearance="outline" class="field">
      <mat-label>Nombre completo</mat-label>
      <input matInput formControlName="nombre" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="field">
      <mat-label>Correo electrónico</mat-label>
      <input matInput type="email" formControlName="email" autocomplete="email" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="field">
      <mat-label>Teléfono</mat-label>
      <input matInput formControlName="telefono" />
    </mat-form-field>
  </div>

  <div class="col right">
    <div class="cv-card" *ngIf="cvUrl; else emptyCv">
      <div class="cv-title">Currículum</div>
      <div class="cv-body">
        <mat-icon>picture_as_pdf</mat-icon>
        <div class="cv-name">{{ cvFileName }}</div>
        <div class="cv-actions">
          <button mat-stroked-button type="button" (click)="viewCv()">Ver</button>
          <button mat-stroked-button color="primary" type="button" (click)="updateInput.click()">Actualizar</button>
        </div>
        <input #updateInput type="file" accept="application/pdf,.pdf" hidden (change)="onCvSelected($event)" />
      </div>
    </div>

    <ng-template #emptyCv>
      <div class="cv-card">
        <div class="cv-title">Currículum</div>
        <div class="cv-body">
          <mat-icon>picture_as_pdf</mat-icon>
          <div class="cv-name">Sin archivo</div>
          <div class="cv-actions">
            <button mat-stroked-button color="primary" type="button" (click)="firstUpload.click()">Subir</button>
          </div>
          <input #firstUpload type="file" accept="application/pdf,.pdf" hidden (change)="onCvSelected($event)" />
        </div>
      </div>
    </ng-template>
  </div>
</form>
